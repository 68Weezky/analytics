<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hockey KE | Dashboard</title>
  <link rel="stylesheet" href="/css/dashboards.css">
</head>
<body>
    <div class="main-section">
      <div class="top-nav">
        <div class="menu" id="menu">
            
        </div>
        <div class="profile" title="Logout">
            
        </div>
      </div>
      <div class="content">
        <div class="left" id="sub-menu">
          <h1>Menu</h1>
          <div class="divider"></div>
          <div class="tab-btn" onclick="openTab(event, 'home')">
            Home
          </div>
          <div class="tab-btn" onclick="openTab(event, 'events')">
            Events
          </div>
          <div class="tab-btn" onclick="openTab(event, 'matches')">
            Matches
          </div>
          <div class="tab-btn"  onclick="openTab(event, 'teams')">
            Teams
          </div>
          <div class="tab-btn" onclick="openTab(event, 'standings')">
            Standings
          </div>
          <div class="tab-btn" onclick="openTab(event, 'player-stats')">
            Player stats
          </div>
          <div class="tab-btn">
            <a href="/logout">Logout</a>
          </div>
        </div>
        <div class="right">
          <div class="tabs">
            <div class="tab" id="home">
              <div class="profile-card">
                <h1>Profile Information</h1>
                <p>Name: <%= user.name %></p>
                <p>Email: <%= user.email %></p>
                <p>Role: <%= user.role %></p>
              </div>
            </div>
            <div class="tab {% if not tab or tab == 'events' then %} active {%end%}" id="events">
              <h1>Events</h1>
              <% if (events && events.length> 0) { %>
                <% events.forEach(event=> { %>
                  <div class="event-card">
                    <h3>
                      <%= event.name %>
                    </h3>
                    <p>Start Date: <%= event.start_date %>
                    </p>
                    <p>End Date: <%= event.end_date %>
                    </p>
                    <p>Location: <%= event.location %>
                    </p>
                    <p>Description: <%= event.description %>
                    </p>
                  </div>
                  <% }); %>
                    <% } else { %>
                      <p>No events available.</p>
              <% } %>
            </div>
            <div class="tab" id="matches"> 
              <h1>Matches</h1>
              <% if (matches && matches.length> 0) { %>
                <% matches.forEach(match=> { %>
                  <div class="match-card">
                    <h3>
                      <%= match.date %>
                    </h3>
                    <p>Venue: <%= match.venue %>
                    </p>
                    <p>Home Team: <%= match.home_team %>
                    </p>
                    <p>Away Team: <%= match.away_team %>
                    </p>
                  </div>
                  <% }); %>
                    <% } else { %>
                      <p>No matches available.</p>
                <% } %>
            </div>
            <div class="tab" id="standings">
                <h1>League Standings</h1>
                <div class="standings-container">
                  <div class="standings-container">
                    <% Object.keys(standings).forEach(league => { %>
                      <h2><%= league %></h2>
                      <table class="standings-table">
                        <thead>
                          <tr>
                            <th>Position</th>
                            <th>Team</th>
                            <th>Wins</th>
                            <th>Losses</th>
                            <th>Draws</th>
                            <th>Goals For</th>
                            <th>Goals Against</th>
                            <th>Goal Difference</th>
                            <th>Points</th>
                            <th>Games Played</th>
                          </tr>
                        </thead>
                        <tbody>
                          <% if (standings[league] && standings[league].length > 0) { %>
                            <% standings[league].forEach((team, index) => { %>
                              <tr>
                                <td><%= index + 1 %></td>
                                <td><%= team.name %></td>
                                <td><%= team.wins %></td>
                                <td><%= team.losses %></td>
                                <td><%= team.draws %></td>
                                <td><%= team.goals_for %></td>
                                <td><%= team.goals_against %></td>
                                <td><%= team.goal_difference %></td>
                                <td><%= team.points %></td>
                                <td><%= team.games_played %></td>
                              </tr>
                            <% }); %>
                          <% } else { %>
                            <tr>
                              <td colspan="10">No standings available for <%= league %>.</td>
                            </tr>
                          <% } %>
                        </tbody>
                      </table>
                    <% }); %>
                    <% if (Object.keys(standings).length === 0) { %>
                      <p>No stats to show</p>
                    <% } %>
                  </div>
                </div>                           
            </div>
            <div class="tab" id="teams">
              <h1>Teams</h1>
            <% if (teams && teams.length> 0) { %>
              <% teams.forEach(team=> { %>
                <div class="team-card">
                  <h3>
                    <%= team.name %>
                  </h3>
                  <p>Number of Players: <%= team.number_of_players %>
                  </p>
                  <p>League: <%= team.league %>
                  </p>
                  <p>Season: <%= team.season %>
                  </p>
                </div>
                <% }); %>
                  <% } else { %>
                    <p>No teams available.</p>
                    <% } %>
            </div>
            <div class="tab" id="player-stats">
              <h1>Player Stats</h1>
              <div class="player-stats-container">
                <div class="player-cards-container">
                  <% if (players && players.length > 0) { %>
                    <% players.forEach(player => { %>
                      <div class="player-card">
                        <div class="player-image">
                          <img src="/images/boy.png" alt="<%= player.name %>">
                        </div>
                        <div class="player-info">
                          <h2><%= player.name %></h2>
                          <p>Team: <%= player.team %></p>
                          <p>Position: <%= player.position %></p>
                          <p>Age: <%= player.age %></p>
                          <p>Jersey Number: <%= player.number %></p>
                          <p>Goals: <%= player.goals %></p>
                          <p>Red Cards: <%= player.red_cards %></p>
                          <p>Yellow Cards: <%= player.yellow_cards %></p>
                        </div>
                      </div>
                    <% }); %>
                  <% } else { %>
                    <p>No players available.</p>
                  <% } %>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/js/dashboards.js"></script>
</body>
</html>